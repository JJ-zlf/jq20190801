<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">

		<title>注册页面</title>
		<link rel="stylesheet" type="text/css" href="css/register.css" />
		<link rel="stylesheet" type="text/css" href="font/iconfont.css"/>
		<script src="js/jquery-1.12.4.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/rem.js" type="text/javascript" charset="utf-8"></script>

	</head>

	<body>
		<div class="app">
			<div class="music">
				<a href="javaScript:history.back(-1)"><i class="iconfont icon-fanhui1 " style="font-size: 2.7rem;"></i></a>
				<span>注册页</span>
				<span></span>
				</i>
			
			</div>
			<form>
				<label>
					<span>用户名</span>
					<input type="text" id="username">
					<p></p>
				</label>

				<label>
					<span>密 码</span>
					<input type="password" id="password">
					<p></p>
				</label>
				<label>
					<span>确认密码</span>
					<input type="password" id="repass">
					<p></p>
				</label>

				<label>
					<span>手机号</span>
					<input type="text" id="phone">
					<p></p>
				</label>
				<label>
					<span>邮箱</span>
					<input type="email" id="email">
					<p></p>
				</label>

				<label>
					<span>验证码</span>
					<input type="text" id="input" />
					<label id='checkk'>
						<input type="button" id="code" />
						<input type="button" value="验证" id="check" />
					</label>
				</label>

				<label for="" id="Sr">
					<button id="Sure" type="submit">确定</button>
					<button type="reset">重 置</button>
				</label>


			</form>


		</div>
		<script src="js/register.js" type="text/javascript" charset="utf-8"></script>

		<script>
		    var height=$(window).height();
			$('body').height(height);
			var
				ok1 = false;

			var
				ok2 = false;

			var
				ok3 = false;

			var
				ok4 = false;
					var
					ok5 = false;

			var allright = false;

			// 验证用户名

			$('input[id="username"]').focus(function() {

				$(this).next().text('用户名应该为2-20位之间').removeClass('state1').addClass('state2');

			}).blur(function() {

				if ($(this).val().length >= 2 && $(this).val().length <= 12 && $(this).val() != '') {

					$(this).next().text('输入成功').removeClass('state1').addClass('state4');

					ok1 = true;

				} else {

					$(this).next().text('用户名应该为2-20位之间！！！').removeClass('state1').addClass('state3');

				}



			});




			//验证密码

			$('input[id="password"]').focus(function() {

				$(this).next().text('密码应该为6-20位之间').removeClass('state1').addClass('state2');

			}).blur(function() {

				if ($(this).val().length >= 6 && $(this).val().length <= 20 && $(this).val() != '') {

					$(this).next().text('输入成功').removeClass('state1').addClass('state4');

					ok2 = true;

				} else {

					$(this).next().text('密码应该为6-20位之间！！！').removeClass('state1').addClass('state3');

				}



			});



			//验证确认密码

			$('input[id="repass"]').focus(function() {

				$(this).next().text('输入的密码需要一致').removeClass('state1').addClass('state2');

			}).blur(function() {

				if ($(this).val().length >= 6 && $(this).val().length <= 20 && $(this).val() != '' &&
					$(this).val() == $('input[id="password"]').val()) {

					$(this).next().text('输入成功').removeClass('state1').addClass('state4');

					ok3 = true;

				} else {

					$(this).next().text('输入的密码需要一致！！！').removeClass('state1').addClass('state3');

				}



			});


			$('input[id="phone"]').focus(function() {

				$(this).next().text('请输入您的手机号').removeClass('state1').addClass('state2');

			}).blur(function() {

				if ($(this).val().length === 11 && $(this).val() != '') {

					$(this).next().text('输入成功').removeClass('state1').addClass('state4');

					ok5 = true;

				} else {

					$(this).next().text('请输入正确的手机号！！！').removeClass('state1').addClass('state3');

				}



			});





			//验证邮箱

			$('input[id="email"]').focus(function() {

				$(this).next().text('请输入正确的EMAIL格式').removeClass('state1').addClass('state2');

			}).blur(function() {

				if ($(this).val().search(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/) == -1) {

					$(this).next().text('请输入正确的EMAIL格式！！！').removeClass('state1').addClass('state3');

				} else {

					$(this).next().text('输入成功').removeClass('state1').addClass('state4');

					ok4 = true;

				}



			});



			//提交按钮,所有验证通过方可提交



			//       $('.submit').click(function () {
			// 
			//         if (ok1 && ok2 && ok3 && ok4) {
			// 
			//           $('form').submit();
			// 
			//         } else {
			// 
			//           return
			//           false;
			// 
			//         }
			// 
			//       });

			function asasdsa() {
				if (ok1 && ok2 && ok3 && ok4 && ok5) {
					allright = true;
				}
			}

			$("form").submit(function(e) {
				e.preventDefault();
				asasdsa();
				if (allright) {
					var username = $("#username");
					var password = $("#password");
					var phone = $("#phone");
					var email = $("#email");

					var obj = {
						password: password.val(),
						phone: phone.val(),
						email: email.val(),
					}
					localStorage.setItem(username.val(), JSON.stringify(obj));
						alert("成功");
					$(location).attr('href', 'index.html');
				}
			});
			
	
				

		</script>

	</body>
</html>
